<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex07</title>
</head>
<body>
<div id="header"></div>

<h1>AJAX - 응용 I : HTML의 일부분 가져오기</h1>

<div id="footer"></div>
<script>
"use strict"
// 웹페이지를 만들 때 AJAX를 이용하여 여러 조각을 붙여서 만들 수 있다.
//
//
var header = document.querySelector("#header"),
    footer = document.querySelector("#footer"),

prepareHeader(); // 함수 정의는 호이스팅 된다.
prepareFooter();
    
function prepareHeader() {
    var xhr = new XMLHttpRequest(); 
    xhr.onreadystatechange = () => {
        if (xhr.readyState == 4) {
        	if(xhr.status == 200) {
        	   header.innerHTML = xhr.responseText;
        	}
        }
    };
    xhr.open("GET", "../../jsp/test5.jsp", true); 
    xhr.send();
};

function prepareFooter() {
    var xhr = new XMLHttpRequest(); 
    xhr.onreadystatechange = () => {
        if (xhr.readyState == 4) {
            if(xhr.status == 200) {
               footer.innerHTML = xhr.responseText;
            }
        }
    };
    xhr.open("GET", "footer.html", true); 
    xhr.send();
};



// 페이지 소스보기는 서버에서 최초로 받았을 때의 코드이다.
// 중간에 자바스크립트가 실행된 후 변경된 코드는 개발자 도구에서 Element 탭에서 봐야 한다.
// 동적으로 변경된 현재 HTML은 여기서만 볼 수 있다.
// 서버에 요청해서 응답받은것을 출력한다.

// AJAX는 로컬로 읽어서 테스트가 되지 않는다.

</script>
</body>
</html>













<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex07</title>
</head>
<body>
<h1>AJAX - XMLHttpRequest()</h1>
<button id="btn1" >요청</button><br>;
<textarea id="ta" cols="80" rows="10"></textarea>


<script>
"use strict"

// XMLHttpRequest()
// => 동기/비동기 HTTP 요청을 할 때 사용한다.
// => 전체 페이지를 갱신하지 않고 페이지 일부만 갱신하는 용도로 쓴다.
// => 서버는 요청에 대한 응답으로  HTML 일부 코드나 XML, JSON 데이터를 전송한다.
// => 이런 기법을 AJAX(Asynchronous JavaScript And XML)이라 부른다.

// 버튼을 클릭할 때 서버에 HTTP 요청하여 응답 결과를 textarea 태그에 출력한다.
var ta = document.querySelector("#ta");

document.querySelector("#btn1").onclick = () => {
	// 1) AJAX 객체 XMLH준비
	// - 빈 객체 생성
	var xhr = new XMLHttpRequest(); // 변수명은 약자로 xhr을 많이 사용한다.
	
	// 2) 서버에 연결 (동기 방식으로 요청)
	// => 1번 파라미터: HTTP 요청 method. ex) GET, POST, HEAD ...
	// => 2번 파라미터: URL
	// => 3번 파라미터: 비동기 여부
	xhr.open("GET", "../../jsp/test1.jsp", false)
	
	// 3) 서버에 HTTP 요청을 보낸다. (서버의 소켓 연결을 생각하면 된다.)
	// => 동기 방식으로 연결되었을 경우 서버에서 응답할 때까지 리턴하지 않는다.
	xhr.send();
	
	// 4) 서버가 응답한 콘텐트를 꺼낸다.
	ta.value = xhr.responseText; 
	// 폼의 입력 항목과 관련된 input, select, button 등은 값을 말할때 value라고 해야 한다.
};




</script>
</body>
</html>












